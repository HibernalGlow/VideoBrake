# Wallpaper Engine 工坊管理工具 - 功能更新

## ✨ 新增功能

### 1. 🔍 增强过滤系统
- **时间过滤**: 根据壁纸修改时间进行范围过滤
- **大小过滤**: 根据文件大小进行范围过滤（支持MB单位显示）
- **展开式过滤器**: 基本过滤和高级过滤分别展示，界面更清爽

### 2. ☑️ 勾选框功能
- **勾选视图**: 新增专门的勾选模式
- **批量选择**: 支持全选/取消全选功能
- **分页显示**: 每页显示20个项目，提升性能
- **批量操作**: 
  - 导出选中项的路径列表
  - 导出选中项的JSON数据
  - 清空选择状态

### 3. 🖼️ 界面优化
- **修复弃用警告**: 将 `use_column_width` 替换为 `use_container_width`
- **三种显示模式**: 
  - 网格视图：卡片式预览
  - 列表视图：表格形式
  - 勾选视图：带选择功能的列表
- **信息展示优化**: 更清晰的布局和信息层次

## 🚀 使用方法

### 启动应用
```bash
# 方法1：使用模块启动
python -m engingv

# 方法2：直接运行Streamlit
streamlit run src/engingv/app.py

# 方法3：使用启动脚本
python run_wpengine.py
```

### 命令行功能
```bash
# 查看帮助
python -m engingv --help

# 扫描工坊目录
python -m engingv --scan "C:\Steam\steamapps\workshop\content\431960"

# 扫描并导出结果
python -m engingv --scan "path" --output "result.json"
```

## 📋 过滤功能详解

### 基本过滤
- **标题搜索**: 模糊匹配壁纸标题
- **内容评级**: Everyone, Mature, Adult 等
- **壁纸类型**: Video, Scene, Web, Application 等
- **性内容评级**: none, mild, moderate, explicit
- **暴力内容评级**: none, mild, moderate, explicit
- **标签过滤**: 多选标签组合

### 高级过滤
- **时间范围**: 
  - 根据壁纸最后修改时间过滤
  - 支持日期范围选择
  - 自动检测最小/最大时间范围
  
- **文件大小**: 
  - 支持大小范围过滤
  - 以MB为单位显示，更直观
  - 滑块式选择，操作便捷

## 🎯 勾选功能使用

### 选择操作
1. 切换到"勾选视图"模式
2. 勾选需要的壁纸项目
3. 使用"全选"/"取消全选"快速操作
4. 查看已选择数量实时更新

### 批量导出
1. 选择目标壁纸
2. 点击"导出选中的X个路径"或"导出选中的X个JSON"
3. 文件自动保存到当前目录，文件名包含时间戳

### 分页浏览
- 每页显示20个项目，避免页面卡顿
- 多页时显示页面选择器
- 选择状态在页面间保持

## 🔧 技术改进

### 性能优化
- 分页显示减少内存占用
- 异步处理提升响应速度
- 缓存机制减少重复计算

### 用户体验
- 实时状态更新
- 操作反馈提示
- 错误处理和提示

### 代码结构
- 模块化设计
- 类型注解完善
- 错误处理健壮

## 📊 统计功能

### 数据统计
- 壁纸总数和总大小
- 类型分布图表
- 内容评级分布
- 热门标签排行

### 可视化图表
- 柱状图显示分布情况
- 交互式图表支持
- 自适应布局

## 🛠️ 配置选项

### 应用配置
```json
{
  "workshop_path": "工坊目录路径",
  "name_template": "命名模板",
  "max_workers": 4,
  "recent_paths": ["最近使用的路径"],
  "display_settings": {
    "items_per_page": 20,
    "default_view": "grid"
  }
}
```

### 命名模板
- `{id}`: 工坊ID
- `{title}`: 壁纸标题  
- `{original_name}`: 原始文件夹名
- `{type}`: 壁纸类型
- `{rating}`: 内容评级

## 🔄 更新日志

### v1.1.0 (2025-06-22)
- ✅ 修复 `use_column_width` 弃用警告
- ✅ 新增时间过滤功能
- ✅ 新增文件大小过滤功能  
- ✅ 新增勾选框视图模式
- ✅ 支持批量选择和导出
- ✅ 优化界面布局和用户体验
- ✅ 增强错误处理和提示

### 后续计划
- 🔲 支持自定义排序
- 🔲 添加收藏夹功能
- 🔲 支持壁纸预览播放
- 🔲 集成Steam Workshop API
- 🔲 支持批量下载和更新
